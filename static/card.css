:root {
    --bg-body: #f0f2f5; --bg-card: #ffffff; 
    --text: #000000; /* TESTO NERO ASSOLUTO */
    --text-muted: #333333;
    --brand: #0088cc;
    --section-bg: #f7f8fa; --section-border: #e1e3e8;
    --link-color: #004466; --footer-col: #000; --fiscal-col: #000;
}
@media (prefers-color-scheme: dark) {
    :root {
        --bg-body: #000000; --bg-card: #18191a; --text: #ffffff; --text-muted: #ccc;
        --brand: #00ffc8; --section-bg: #242526; --section-border: #3e4042;
        --link-color: #4dd0e1; --footer-col: #fff; --fiscal-col: #ccc;
    }
}
body[data-theme="light"] { --bg-body: #f0f2f5; --bg-card: #ffffff; --text: #000000; --section-bg: #f7f8fa; --footer-col: #000; --fiscal-col: #000; }
body[data-theme="dark"] { --bg-body: #000000; --bg-card: #18191a; --text: #ffffff; --section-bg: #242526; --footer-col: #fff; --fiscal-col: #ccc; }

body { margin:0; font-family:'Segoe UI', sans-serif; background:var(--bg-body); display:flex; justify-content:center; min-height:100vh; }
.card-wrap { width:100%; max-width:420px; background:var(--bg-card); min-height:100vh; text-align:center; color:var(--text); padding-bottom:100px; box-shadow:0 0 20px rgba(0,0,0,0.1); position:relative; overflow-x:hidden; }
a { text-decoration:none; color:var(--link-color); }

/* HERO */
.hero { width:100%; height:180px; background:#222; position:relative; margin-bottom:80px; }
.hero-logo-circle { position:absolute; top:20px; left:20px; width:90px; height:90px; border-radius:50%; background:#fff; overflow:hidden; box-shadow:0 4px 15px rgba(0,0,0,0.4); z-index:20; display:flex; align-items:center; justify-content:center; border:2px solid white; }
.hero-logo-circle img { max-width:85%; max-height:85%; object-fit:contain; }

/* 3D FLIP */
.flip-container { width:160px; height:160px; position:absolute; top:100px; left:50%; margin-left:-80px; z-index:10; perspective:1000px; cursor:pointer; }
.flipper { width:100%; height:100%; position:relative; transform-style:preserve-3d; transition:transform 0.8s; border-radius:50%; border:6px solid var(--bg-card); box-shadow:0 5px 15px rgba(0,0,0,0.2); background:#eee; }
.tap-flip.flipped .flipper { transform: rotateY(180deg); }
.mirror-flip .flipper { animation: rotateFlip 6s infinite linear; }
@keyframes rotateFlip { 0% { transform: rotateY(0); } 50% { transform: rotateY(180deg); } 100% { transform: rotateY(360deg); } }
.spin-agent .flipper { animation: spin 10s linear infinite; }
@keyframes spin { 100% { transform: rotate(360deg); } }

.front, .back { position:absolute; width:100%; height:100%; backface-visibility:hidden; border-radius:50%; overflow:hidden; top:0; left:0; }
.front { z-index:2; background:#eee; }
.back { transform: rotateY(180deg); background:#fff; display:flex; align-items:center; justify-content:center; }
.avatar-img { width:100%; height:100%; object-fit:cover; }
.back-img { width:100%; height:100%; object-fit:contain; }

/* INFO */
.info-section { padding:0 25px; margin-top:10px; }
.name { font-size:28px; font-weight:800; margin:5px 0; color:var(--text); }
.role { font-size:16px; color:var(--text-muted); margin-bottom:20px; font-weight:700; text-transform:uppercase; }
.box-company { background:#fff5f5; padding:8px 20px; border-radius:50px; margin-bottom:15px; border:2px solid #ff4444; display:inline-block; color:#000; font-weight:bold; text-transform:uppercase; font-size:14px; }
.box-bio { background:#e0f7fa; padding:15px; border-radius:12px; font-weight:600; font-style:italic; margin:15px 0; border-left:4px solid var(--brand); text-align:left; font-size:14px; color:#000; }

.actions-row { display:flex; gap:12px; justify-content:center; margin-bottom:25px; padding:0 20px; }
.btn-save { background:linear-gradient(135deg, #0088cc, #00ffc8); color:#000; padding:14px 0; width:100%; border-radius:50px; text-decoration:none; font-weight:800; display:flex; align-items:center; justify-content:center; gap:10px; }
.btn-qr { width:52px; height:52px; border:1px solid #ccc; border-radius:12px; padding:4px; background:white; cursor:pointer; }
.btn-qr img { width:100%; height:100%; }

.social-grid { display:flex; justify-content:center; gap:12px; margin:25px 0; flex-wrap:wrap; }
.soc-btn { width:45px; height:45px; background:var(--bg-card); border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:24px; box-shadow:0 3px 8px rgba(0,0,0,0.1); border:1px solid var(--section-border); }
.soc-fb { color:#1877F2; } .soc-ig { color:#E4405F; } .soc-li { color:#0A66C2; } .soc-tk { color:#000; } .soc-sp { color:#1DB954; } .soc-tg { color:#0088cc; } .soc-yt { color:#FF0000; }

/* FIX SWITCHER P1/P2 IN LINEA */
.switcher-bar { 
    display:flex; flex-direction:row; justify-content:center; align-items:center; gap:10px; 
    margin:20px; padding:10px; background:var(--section-bg); border-radius:30px; 
    border:1px solid var(--section-border); flex-wrap:nowrap; 
}
/* P1 = BLU, P2 = VERDE, P3 = ARANCIO */
.circle-p { width:35px; height:35px; border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:12px; flex-shrink:0; text-decoration:none; }
.p1-btn { background: #0088cc; }
.p2-btn { background: #00cc66; }
.p3-btn { background: #ff9900; }

/* TASTI TEMA ARROTONDATI E COLORATI */
.theme-btn { 
    padding:5px 12px; font-size:10px; font-weight:bold; cursor:pointer; 
    text-transform:uppercase; border:1px solid #ccc; border-radius:15px; /* ARROTONDATI */
}
.t-light { background: #ffffff; color: #000; }
.t-dark { background: #000000; color: #fff; }
.t-auto { background: #888888; color: #fff; }

.scene-box { margin:20px; background:var(--section-bg); border:1px solid var(--section-border); border-radius:15px; padding:15px; text-align:left; position:relative; }
.scene-label { position:absolute; top:-10px; left:15px; background:var(--brand); color:white; font-size:10px; font-weight:bold; padding:2px 10px; border-radius:10px; text-transform:uppercase; }

.d-row { padding:10px 0; border-bottom:1px solid rgba(128,128,128,0.1); display:flex; align-items:center; gap:15px; font-size:15px; }
.d-link { font-weight:700; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; color:var(--text); }
.fiscal-row { margin-top:10px; padding-top:10px; border-top:1px solid rgba(128,128,128,0.2); font-size:11px; display:flex; justify-content:space-between; flex-wrap:wrap; color:var(--fiscal-col); font-weight:bold; }

.gal-grid-5 { display:grid; grid-template-columns:repeat(5, 1fr); gap:5px; margin-top:5px; }
.thumb { width:100%; aspect-ratio:1; object-fit:cover; cursor:pointer; background:#000; border-radius:4px; }
.vid-box { position:relative; width:100%; aspect-ratio:1; background:#000; cursor:pointer; border-radius:4px; overflow:hidden; }
.vid-box video { width:100%; height:100%; object-fit:cover; opacity:0.6; }
.vid-icon { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:white; font-size:16px; }
.pdf-grid { display:flex; flex-direction:column; gap:5px; margin-top:5px; }
.pdf-item { background:var(--bg-card); padding:10px; border-radius:8px; font-size:13px; display:flex; align-items:center; justify-content:space-between; gap:10px; cursor:pointer; border:1px solid var(--section-border); }

.footer { padding:30px 20px; font-size:12px; font-weight:bold; text-transform:uppercase; letter-spacing:1px; cursor:pointer; }
.f-brand { color: #0088cc; } .f-copy { color: #888; } .f-name { color: #00ffc8; font-weight:900; }

.modal-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:9999; justify-content:center; align-items:center; flex-direction:column; }
.modal-content { max-width:95%; max-height:70vh; margin-bottom:15px; border-radius:10px; }
.web-frame { width:95%; height:80vh; background:white; border:none; border-radius:10px; }
.modal-actions { display:flex; gap:15px; margin-top:10px; }
.act-btn { width:55px; height:55px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:24px; color:white; text-decoration:none; }
.bg-wa { background:#25D366; } .bg-em { background:#555; } .bg-cl { background:#ff4444; cursor:pointer; }
.btn-back-card { background:#0088cc; color:white; padding:12px 25px; border-radius:25px; text-decoration:none; font-weight:bold; margin-bottom:15px; display:inline-block; box-shadow:0 4px 10px rgba(0,0,0,0.5); cursor:pointer; text-transform:uppercase; font-size:14px; }
