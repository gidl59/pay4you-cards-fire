{% extends "base.html" %}

{% block title %}{{ ag.name }} | Pay4You{% endblock %}

{% block content %}
<div style="max-width:980px;margin:0 auto;padding:18px;">
  <div style="display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap;">
    <div style="flex:1;min-width:280px;background:#0f172a;border:1px solid #1f2937;border-radius:16px;padding:16px;">
      <div style="display:flex;gap:14px;align-items:center;">
        {% if ag.photo_url %}
          <img src="{{ ag.photo_url }}" alt="foto" style="width:78px;height:78px;border-radius:14px;object-fit:cover;border:1px solid #1f2937;">
        {% endif %}
        <div>
          <div style="font-size:22px;font-weight:700;color:#e5e7eb;">{{ ag.name }}</div>
          {% if ag.company %}<div style="opacity:.85;margin-top:2px;">{{ ag.company }}</div>{% endif %}
          {% if ag.role %}<div style="opacity:.75;margin-top:2px;">{{ ag.role }}</div>{% endif %}
        </div>
      </div>

      {% if ag.bio %}
        <p style="margin-top:12px;opacity:.9;line-height:1.5;">{{ ag.bio }}</p>
      {% endif %}

      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
        <a href="{{ url_for('vcard', slug=ag.slug) }}"
           style="background:#2563eb;color:#fff;text-decoration:none;padding:10px 12px;border-radius:12px;">
          Salva contatto
        </a>

        <a href="{{ wa_optin_link }}" target="_blank" rel="noopener"
           style="background:#16a34a;color:#fff;text-decoration:none;padding:10px 12px;border-radius:12px;">
          üü¢ Ricevi promo su WhatsApp
        </a>
      </div>

      <div style="font-size:12px;opacity:.8;margin-top:8px;">
        Premendo ‚ÄúInvia‚Äù su WhatsApp autorizzi la ricezione di aggiornamenti. Per annullare: scrivi <b>STOP</b>.
      </div>

      <hr style="margin:14px 0;opacity:.2;">

      <div style="display:grid;grid-template-columns:1fr;gap:8px;">
        {% for m in mobiles %}
          <div>üìû <a href="tel:{{ m }}" style="color:#93c5fd;">{{ m }}</a></div>
        {% endfor %}

        {% for e in emails %}
          <div>‚úâÔ∏è <a href="mailto:{{ e }}" style="color:#93c5fd;">{{ e }}</a></div>
        {% endfor %}

        {% for w in websites %}
          <div>üåê <a href="{{ w }}" target="_blank" rel="noopener" style="color:#93c5fd;">{{ w }}</a></div>
        {% endfor %}
      </div>
    </div>

    <div style="width:320px;max-width:100%;background:#0b1220;border:1px solid #1f2937;border-radius:16px;padding:16px;">
      <div style="font-weight:700;margin-bottom:10px;">QR</div>
      <img src="{{ url_for('qr', slug=ag.slug) }}" alt="qr" style="width:100%;border-radius:14px;border:1px solid #1f2937;">
      <div style="font-size:12px;opacity:.75;margin-top:8px;">
        Link: <a href="{{ base_url }}/{{ ag.slug }}" style="color:#93c5fd;">{{ base_url }}/{{ ag.slug }}</a>
      </div>
    </div>
  </div>

  {% if pdfs and pdfs|length > 0 %}
    <div style="margin-top:18px;background:#0f172a;border:1px solid #1f2937;border-radius:16px;padding:16px;">
      <div style="font-weight:700;margin-bottom:10px;">Documenti</div>
      <ul style="margin:0;padding-left:18px;">
        {% for p in pdfs %}
          <li><a href="{{ p.url }}" target="_blank" rel="noopener" style="color:#93c5fd;">{{ p.name }}</a></li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  {% if gallery and gallery|length > 0 %}
    <div style="margin-top:18px;background:#0f172a;border:1px solid #1f2937;border-radius:16px;padding:16px;">
      <div style="font-weight:700;margin-bottom:10px;">Galleria</div>
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;">
        {% for g in gallery %}
          <a href="{{ g }}" target="_blank" rel="noopener">
            <img src="{{ g }}" alt="img" style="width:100%;height:120px;object-fit:cover;border-radius:12px;border:1px solid #1f2937;">
          </a>
        {% endfor %}
      </div>
    </div>
  {% endif %}

  {% if videos and videos|length > 0 %}
    <div style="margin-top:18px;background:#0f172a;border:1px solid #1f2937;border-radius:16px;padding:16px;">
      <div style="font-weight:700;margin-bottom:10px;">Video</div>
      <div style="display:grid;grid-template-columns:1fr;gap:12px;">
        {% for v in videos %}
          <video src="{{ v }}" controls style="width:100%;border-radius:12px;border:1px solid #1f2937;"></video>
        {% endfor %}
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
