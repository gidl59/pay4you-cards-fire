{% extends "base.html" %}

{% block title %}{% if agent %}Modifica agente{% else %}Nuovo agente{% endif %}{% endblock %}

{% block content %}
<div class="agent-form-wrapper">
  <div class="admin-card">
    <h1 class="agent-form-title">
      {% if agent %}Modifica agente{% else %}Nuovo agente{% endif %}
    </h1>

    <form class="agent-form"
          method="post"
          enctype="multipart/form-data"
          action="{% if agent %}
                     {{ url_for('update_agent', slug=agent.slug) }}
                   {% else %}
                     {{ url_for('create_agent') }}
                   {% endif %}">

      <div>
        <label>Slug (URL) es. giuseppe â†’ /giuseppe</label>
        <input type="text" name="slug" value="{{ agent.slug if agent else '' }}" required>
      </div>

      <div>
        <label>Nome completo</label>
        <input type="text" name="name" value="{{ agent.name if agent else '' }}" required>
      </div>

      <div>
        <label>Azienda</label>
        <input type="text" name="company" value="{{ agent.company if agent else '' }}">
      </div>

      <div>
        <label>Ruolo (facoltativo)</label>
        <input type="text" name="role" value="{{ agent.role if agent else '' }}">
      </div>

      <div>
        <label>Bio / descrizione breve</label>
        <textarea name="bio">{{ agent.bio if agent and agent.bio else '' }}</textarea>
      </div>

      <div>
        <label>Telefono mobile</label>
        <input type="text" name="phone_mobile" value="{{ agent.phone_mobile if agent else '' }}">
      </div>

      <div>
        <label>Telefono ufficio</label>
        <input type="text" name="phone_office" value="{{ agent.phone_office if agent else '' }}">
      </div>

      <div>
        <label>Email (separate da virgola)</label>
        <input type="text" name="emails" value="{{ agent.emails if agent else '' }}">
      </div>

      <div>
        <label>Siti web (separati da virgola)</label>
        <input type="text" name="websites" value="{{ agent.websites if agent else '' }}">
      </div>

      <div>
        <label>WhatsApp (numero internazionale)</label>
        <input type="text" name="whatsapp" value="{{ agent.whatsapp if agent else '' }}">
      </div>

      <div>
        <label>Facebook</label>
        <input type="text" name="facebook" value="{{ agent.facebook if agent else '' }}">
      </div>

      <div>
        <label>Instagram</label>
        <input type="text" name="instagram" value="{{ agent.instagram if agent else '' }}">
      </div>

      <div>
        <label>LinkedIn</label>
        <input type="text" name="linkedin" value="{{ agent.linkedin if agent else '' }}">
      </div>

      <div>
        <label>PEC</label>
        <input type="text" name="pec" value="{{ agent.pec if agent else '' }}">
      </div>

      <div>
        <label>Partita IVA</label>
        <input type="text" name="piva" value="{{ agent.piva if agent else '' }}">
      </div>

      <div>
        <label>Codice SDI</label>
        <input type="text" name="sdi" value="{{ agent.sdi if agent else '' }}">
      </div>

      <div>
        <label>Indirizzi (uno per riga)</label>
        <textarea name="addresses">{{ agent.addresses if agent and agent.addresses else '' }}</textarea>
      </div>

      <div>
        <label>Foto profilo</label>
        <input type="file" name="photo" accept="image/*">
      </div>

      <div>
        <label>PDF 1</label>
        <input type="file" name="pdf1" accept="application/pdf">
      </div>

      <div>
        <label>PDF 2</label>
        <input type="file" name="pdf2" accept="application/pdf">
      </div>

      <div>
        <label>Galleria foto (max 12 immagini)</label>
        <input type="file" name="gallery" accept="image/*" multiple>
      </div>

      <div class="agent-form-buttons">
        <button type="submit">Salva modifiche</button>
        <a href="{{ url_for('admin_home') }}" class="btn-secondary">Annulla</a>
      </div>

    </form>
  </div>
</div>
{% endblock %}
