<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Master Control</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico?v=2">
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .admin-box { background:#111; padding:20px; border-radius:15px; border:1px solid #333; margin-bottom:20px; }
        .btn-mini { padding: 6px 12px; border-radius: 4px; border: none; cursor: pointer; color: white; text-decoration: none; font-size:12px; display:inline-block;}
        .bg-blue { background: #0088cc; }
        .bg-red { background: #cc0000; }
        .bg-green { background: #00ffc8; color:black; font-weight:bold; }
        .input-dark { background: #222; border: 1px solid #444; color: white; padding: 10px; border-radius: 5px; width: 100%; box-sizing:border-box;}
    </style>
</head>
<body style="background:#050505; padding:20px; font-family:sans-serif; color:white;">

    <div class="dash-container">
        <div style="display:flex; justify-content:space-between; margin-bottom:30px; align-items:center;">
            <h1 style="color:#ff4444; margin:0;">MASTER CONTROL</h1>
            <a href="/master/logout" style="color:white; text-decoration:none; border:1px solid #444; padding:5px 10px; border-radius:5px;">Esci</a>
        </div>

        <div class="admin-box" style="border-top: 3px solid #00ffc8;">
            <h3 style="color:#00ffc8; margin-top:0;">‚ûï Aggiungi Cliente</h3>
            <form action="/master/add" method="POST" style="display:grid; grid-template-columns: 1fr 1fr 1fr 1fr auto; gap:10px; align-items:end;">
                <div>
                    <label style="font-size:11px; color:#888;">Nome Cliente</label>
                    <input type="text" name="nome" class="input-dark" placeholder="Mario Rossi" required>
                </div>
                <div>
                    <label style="font-size:11px; color:#888;">Username</label>
                    <input type="text" name="username" class="input-dark" placeholder="mario" required>
                </div>
                <div>
                    <label style="font-size:11px; color:#888;">Password</label>
                    <input type="text" name="password" class="input-dark" placeholder="pass123" required>
                </div>
                <div>
                    <label style="font-size:11px; color:#888;">Slug (no spazi)</label>
                    <input type="text" name="slug" class="input-dark" placeholder="mario-rossi" required>
                </div>
                <button type="submit" class="btn-mini bg-green" style="height:38px;">CREA</button>
            </form>
        </div>

        <div class="admin-box">
            <h3 style="margin-top:0;">Lista Clienti Attivi</h3>
            <table style="width:100%; text-align:left; border-collapse: collapse;">
                <thead style="background:#222; color:#888;">
                    <tr>
                        <th style="padding:10px;">Nome</th>
                        <th style="padding:10px;">Card Link</th>
                        <th style="padding:10px; text-align:right;">Azioni</th>
                    </tr>
                </thead>
                <tbody>
                    {% for c in clienti %}
                    <tr style="border-bottom:1px solid #222;">
                        <td style="padding:15px;">
                            <strong style="font-size:15px;">{{ c.nome }}</strong><br>
                            <span style="color:#666; font-size:12px;">User: {{ c.username }} / Pass: {{ c.password }}</span>
                        </td>
                        <td>
                            <a href="/card/{{ c.slug }}" target="_blank" style="color:#0088cc; text-decoration:none;">/card/{{ c.slug }}</a>
                        </td>
                        <td style="text-align:right;">
                            <a href="/master/impersonate/{{ c.id }}" target="_blank" class="btn-mini bg-blue">üëÅÔ∏è Gestisci</a>
                            
                            <a href="/master/delete/{{ c.id }}" class="btn-mini bg-red" onclick="return confirm('Eliminare {{ c.nome }}?')">üóëÔ∏è</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</body>
</html>
